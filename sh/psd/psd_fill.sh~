#!/bin/bash

# Check dependencies
if ! command -v convert &> /dev/null; then
    echo "âŒ 'convert' (ImageMagick) not found. Install it with: sudo apt install imagemagick"
    exit 1
fi

echo "ğŸ”„ Starting interior-fill processing in: $(pwd)"

for file in *.png; do
    [ -e "$file" ] || continue

    base="${file%.*}"
    output="${base}_filled.png"

    echo "ğŸ‘‰ Processing: $file"

    # Step 1: Fill white areas inside the drawing with green
    # Step 2: Make the black background transparent
    convert "$file" \
        -fuzz 10% -fill "#00FF00" -draw "color 1,1 floodfill" \
        -fuzz 5% -transparent black \
        "$output"

    echo "âœ… Saved: $output"
done

echo "ğŸ‰ All done!"
